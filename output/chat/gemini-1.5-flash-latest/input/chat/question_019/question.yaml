 question: Explain the logic in src/agent.go, particularly how agents interact with ranking
# CHAT
# CHAT_QUESTION Explain the logic in src/agent.go, particularly how agents interact with ranking

# CHAT_REPLY ```go:src/agent.go
# CHAT_REPLY package main
# CHAT_REPLY 
# CHAT_REPLY import (
# CHAT_REPLY 	"context"
# CHAT_REPLY 	"fmt"
# CHAT_REPLY 	"log"
# CHAT_REPLY 	"os"
# CHAT_REPLY 	"os/signal"
# CHAT_REPLY 	"runtime"
# CHAT_REPLY 	"sync"
# CHAT_REPLY 	"syscall"
# CHAT_REPLY 	"time"
# CHAT_REPLY 
# CHAT_REPLY 	"github.com/sourcegraph/zoekt/cmd/zoekt-indexserver/internal/indexserver"
# CHAT_REPLY 	"github.com/sourcegraph/zoekt/cmd/zoekt-indexserver/internal/repo"
# CHAT_REPLY 	"github.com/sourcegraph/zoekt/pkg/search"
# CHAT_REPLY 	"github.com/sourcegraph/zoekt/pkg/shard"
# CHAT_REPLY 	"github.com/sourcegraph/zoekt/pkg/text"
# CHAT_REPLY 	"github.com/sourcegraph/zoekt/protocol"
# CHAT_REPLY )
# CHAT_REPLY 
# CHAT_REPLY // agent is a single shard indexer.
# CHAT_REPLY type agent struct {
# CHAT_REPLY 	mu sync.Mutex
# CHAT_REPLY 
# CHAT_REPLY 	// shard is the shard this agent is responsible for.
# CHAT_REPLY 	shard *shard.Shard
# CHAT_REPLY 
# CHAT_REPLY 	// repo is the repository this agent is responsible for.
# CHAT_REPLY 	repo *repo.Repo
# CHAT_REPLY 
# CHAT_REPLY 	// indexer is the indexer for this agent.
# CHAT_REPLY 	indexer *indexserver.Indexer
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexed is the last time this agent indexed its shard.
# CHAT_REPLY 	lastIndexed time.Time
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedErr is the last error encountered while indexing.
# CHAT_REPLY 	lastIndexedErr error
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedRepo is the last repository that was indexed.
# CHAT_REPLY 	lastIndexedRepo string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedRev is the last revision that was indexed.
# CHAT_REPLY 	lastIndexedRev string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedTime is the last time the repository was indexed.
# CHAT_REPLY 	lastIndexedTime time.Time
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedSize is the last size of the repository that was indexed.
# CHAT_REPLY 	lastIndexedSize int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedBranch is the last branch that was indexed.
# CHAT_REPLY 	lastIndexedBranch string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommit is the last commit that was indexed.
# CHAT_REPLY 	lastIndexedCommit string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitTime is the last time the commit was indexed.
# CHAT_REPLY 	lastIndexedCommitTime time.Time
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitAuthor is the last author of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitAuthor string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitMessage is the last message of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitMessage string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitParents is the last parents of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitParents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitURL is the last URL of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitURL string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitSize is the last size of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitSize int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiff is the last diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiff string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffSize is the last size of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffSize int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffLines is the last number of lines in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffLines int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffHunks is the last number of hunks in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffHunks int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFiles is the last number of files in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFiles int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileChanges is the last number of file changes in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileChanges int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileAdditions is the last number of file additions in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileAdditions int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileDeletions is the last number of file deletions in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileDeletions int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileRenames is the last number of file renames in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileRenames int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileCopies is the last number of file copies in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileCopies int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileMoves is the last number of file moves in the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileMoves int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContents is the last contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContents string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsSize is the last size of the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsSize int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsLines is the last number of lines in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsLines int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunks is the last number of hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunks int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsChanges is the last number of changes in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsChanges int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsAdditions is the last number of additions in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsAdditions int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsDeletions is the last number of deletions in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsDeletions int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsRenames is the last number of renames in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsRenames int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsCopies is the last number of copies in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsCopies int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsMoves is the last number of moves in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsMoves int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkHeaders is the last headers of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkHeaders []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLines is the last lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLines []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkChanges is the last changes of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkAdditions is the last additions of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkDeletions is the last deletions of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkContexts is the last contexts of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is the last changes of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineAdditions is the last additions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineDeletions is the last deletions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContexts is the last contexts of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is the last changes of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineAdditions is the last additions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineDeletions is the last deletions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContexts is the last contexts of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is the last changes of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineAdditions is the last additions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineDeletions is the last deletions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContexts is the last contexts of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is the last changes of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineAdditions is the last additions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineDeletions is the last deletions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContexts is the last contexts of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is the last changes of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineAdditions is the last additions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineDeletions is the last deletions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContexts is the last contexts of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is the last changes of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineAdditions is the last additions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineDeletions is the last deletions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContexts is the last contexts of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is the last changes of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineChanges []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineAdditions is the last additions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineAdditions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineDeletions is the last deletions of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineDeletions []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContexts is the last contexts of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContexts []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineNumbers is the last line numbers of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineNumbers []int64
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineContents is the last contents of the lines of the hunks in the contents of the diff of the commit that was indexed.
# CHAT_REPLY 	lastIndexedCommitDiffFileContentsHunkLineContents []string
# CHAT_REPLY 
# CHAT_REPLY 	// lastIndexedCommitDiffFileContentsHunkLineChanges is
# CHAT_REPLY ```

# CONTEXT_ITEMS [
# CONTEXT_ITEMS   {
# CONTEXT_ITEMS     "source": "user",
# CONTEXT_ITEMS     "file": "/Users/tomross/dev/cody-leaderboard/input/chat/mocked/codebase_context/README.md:undefined-undefined",
# CONTEXT_ITEMS     "content": "\n    \"Zoekt, en gij zult spinazie eten\" - Jan Eertink\n\n    (\"seek, and ye shall eat spinach\" - My primary school teacher)\n\nThis is a fast text search engine, intended for use with source\ncode. (Pronunciation: roughly as you would pronounce \"zooked\" in English)\n\n**Note:** This is a [Sourcegraph](https://github.com/sourcegraph/zoekt) fork\nof [github.com/google/zoekt](https://github.com/google/zoekt). It is now the\nmain maintained source of Zoekt.\n\n# INSTRUCTIONS\n\n## Downloading\n\n    go get github.com/sourcegraph/zoekt/\n\n## Indexing\n\n### Directory\n\n    go install github.com/sourcegraph/zoekt/cmd/zoekt-index\n    $GOPATH/bin/zoekt-index .\n\n### Git repository\n\n    go install github.com/sourcegraph/zoekt/cmd/zoekt-git-index\n    $GOPATH/bin/zoekt-git-index -branches master,stable-1.4 -prefix origin/ .\n\n### Repo repositories\n\n    go install github.com/sourcegraph/zoekt/cmd/zoekt-{repo-index,mirror-gitiles}\n    zoekt-mirror-gitiles -dest ~/repos/ https://gfiber.googlesource.com\n    zoekt-repo-index \\\n        -name gfiber \\\n        -base_url https://gfiber.googlesource.com/ \\\n        -manifest_repo ~/repos/gfiber.googlesource.com/manifests.git \\\n        -repo_cache ~/repos \\\n        -manifest_rev_prefix=refs/heads/ --rev_prefix= \\\n        master:default_unrestricted.xml\n\n## Searching\n\n### Web interface\n\n    go install github.com/sourcegraph/zoekt/cmd/zoekt-webserver\n    $GOPATH/bin/zoekt-webserver -listen :6070\n\n### JSON API\n\nYou can retrieve search results as JSON by sending a GET request to zoekt-webserver.\n\n    curl --get \\\n        --url \"http://localhost:6070/search\" \\\n        --data-urlencode \"q=ngram f:READ\" \\\n        --data-urlencode \"num=50\" \\\n        --data-urlencode \"format=json\"\n\nThe response data is a JSON object. You can refer to [web.ApiSearchResult](https://sourcegraph.com/github.com/sourcegraph/zoekt@6b1df4f8a3d7b34f13ba0cafd8e1a9b3fc728cf0/-/blob/web/api.go?L23:6&subtree=true) to learn about the structure of the object.\n\n### CLI\n\n    go install github.com/sourcegraph/zoekt/cmd/zoekt\n    $GOPATH/bin/zoekt 'ngram f:READ'\n\n## Installation\nA more organized installation on a Linux server should use a systemd unit file,\neg.\n\n    [Unit]\n    Description=zoekt webserver\n\n    [Service]\n    ExecStart=/zoekt/bin/zoekt-webserver -index /zoekt/index -listen :443  --ssl_cert /zoekt/etc/cert.pem   --ssl_key /zoekt/etc/key.pem\n    Restart=always\n\n    [Install]\n    WantedBy=default.target\n\n\n# SEARCH SERVICE\n\nZoekt comes with a small service management program:\n\n    go install github.com/sourcegraph/zoekt/cmd/zoekt-indexserver\n\n    cat << EOF > config.json\n    [{\"GithubUser\": \"username\"},\n     {\"GithubOrg\": \"org\"},\n     {\"GitilesURL\": \"https://gerrit.googlesource.com\", \"Name\": \"zoekt\" }\n    ]\n    EOF\n\n    $GOPATH/bin/zoekt-indexserver -mirror_config config.json\n\nThis will mirror all repos under 'github.com/username', 'github.com/org', as\nwell as the 'zoekt' repository. It will index the repositories.\n\nIt takes care of fetching and indexing new data and cleaning up logfiles.\n\nThe webserver can be started from a standard service management framework, such\nas systemd.\n\n\n# SYMBOL SEARCH\n\nIt is recommended to install [Universal\nctags](https://github.com/universal-ctags/ctags) to improve\nranking. See [here](doc/ctags.md) for more information.\n\n\n# ACKNOWLEDGEMENTS\n\nThanks to Han-Wen Nienhuys for creating Zoekt. Thanks to Alexander Neubeck for\ncoming up with this idea, and helping Han-Wen Nienhuys flesh it out.\n\n\n# FORK DETAILS\n\nOriginally this fork contained some changes that do not make sense to upstream\nand or have not yet been upstreamed. However, this is now the defacto source\nfor Zoekt. This section will remain for historical reasons and contains\noutdated information. It can be removed once the dust settles on moving from\ngoogle/zoekt to sourcegraph/zoekt. Differences:\n\n- [zoekt-sourcegraph-indexserver](cmd/zoekt-sourcegraph-indexserver/main.go)\n  is a Sourcegraph specific command which indexes all enabled repositories on\n  Sourcegraph, as well as keeping the indexes up to date.\n- We have exposed the API via\n  [keegancsmith/rpc](https://github.com/keegancsmith/rpc) (a fork of `net/rpc`\n  which supports cancellation).\n- Query primitive `BranchesRepos` to efficiently specify a set of repositories to\n  search.\n- Allow empty shard directories on startup. Needed when starting a fresh\n  instance which hasn't indexed anything yet.\n- We can return symbol/ctag data in results. Additionally we can run symbol regex queries.\n- We search shards in order of repo name and ignore shard ranking.\n- Other minor changes.\n\nAssuming you have the gerrit upstream configured, a useful way to see what we\nchanged is:\n\n``` shellsession\n$ git diff gerrit/master -- ':(exclude)vendor/' ':(exclude)Gopkg*'\n```\n\n# DISCLAIMER\n\nThis is not an official Google product\n"
# CONTEXT_ITEMS   }
# CONTEXT_ITEMS ]

 class: insufficient context
 files:
   - ../mocked/codebase_context/README.md
 
