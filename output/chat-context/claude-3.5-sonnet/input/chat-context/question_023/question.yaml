 question: Where is the code that enforces the context length limit?
# CHAT
# CHAT_QUESTION Where is the code that enforces the context length limit?

# CHAT_REPLY The code that enforces the context length limit appears to be spread across multiple files in the codebase. Here are some relevant parts:
# CHAT_REPLY 
# CHAT_REPLY 1. In `cody_test/vscode/src/completions/context/context-mixer.ts`, there's a `maxChars` parameter in the `GetContextOptions` interface, which suggests a character limit for context.
# CHAT_REPLY 
# CHAT_REPLY 2. The `truncateTextNearestLine` function in `cody_test/lib/shared/src/prompt/truncation.ts` is used to truncate text to a specified maximum number of bytes, which could be used for limiting context length.
# CHAT_REPLY 
# CHAT_REPLY 3. In `cody_test/vscode/src/completions/providers/provider.ts`, the `standardContextSizeHints` function defines character limits for different parts of the context (total, prefix, and suffix).
# CHAT_REPLY 
# CHAT_REPLY 4. The `limitMatches`, `limitLineMatches`, and `limitChunkMatches` functions in `mocked/codebase_context/limit.go` appear to enforce limits on the number of matches or chunks in file content, which could be part of context limiting.
# CHAT_REPLY 
# CHAT_REPLY 5. The `concurrencyLimiter` and `RateLimit` structures in `mocked/enhanced_context/limit.go` suggest mechanisms for limiting requests and controlling allowed models, which could indirectly affect context length.
# CHAT_REPLY 
# CHAT_REPLY These components work together to enforce various aspects of context length limits throughout the codebase.

# CONTEXT_ITEMS [{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/enhanced_context/limit.goL164-169"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/enhanced_context/limit.goL61-63"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/enhanced_context/limit.goL132-134"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/codebase_context/limit.goL80-125"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/codebase_context/limit.goL129-143"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/enhanced_context/limit.goL20-36"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/enhanced_context/limit.goL85-99"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/codebase_context/limit.goL62-76"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/services/utils/code-count.test.tsL0-57"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/services/utils/code-count.tsL0-21"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/test/e2e/code-actions.test.tsL0-73"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/commands/services/code-lenses.tsL0-203"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/mocked/enhanced_context/limit.goL138-138"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/commands/context/directory.tsL49-74"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/agent/src/AgentTextDocument.tsL91-122"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/lib/shared/src/codebase-context/messages.tsL38-88"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/lib/shared/src/token/constants.tsL0-40"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/commands/context/file-path.tsL0-43"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/commands/context/workspace.tsL22-51"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/completions/providers/fireworks.tsL175-199"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/edit/prompt/context.tsL39-61"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/completions/providers/provider.tsL27-57"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/lib/shared/src/prompt/truncation.tsL25-60"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/context/remote-search.tsL152-163"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/chat/chat-view/prompt.tsL57-80"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/chat/utils.tsL104-135"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/completions/context/retrievers/jaccard-similarity/jaccard-similarity-retriever.tsL0-22"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/completions/context/context-mixer.tsL0-33"}]

 class: Find logic
