 question: Where do we call remote searches?
# CHAT
# CHAT_QUESTION Where do we call remote searches?

# CHAT_REPLY Based on the provided codebase context, remote searches are called in the following locations:
# CHAT_REPLY 
# CHAT_REPLY 1. **`searchRemote` function in `cody_test/vscode/src/chat/chat-view/context.ts`**:
# CHAT_REPLY     ```typescript
# CHAT_REPLY     async function searchRemote(
# CHAT_REPLY         remoteSearch: RemoteSearch | null,
# CHAT_REPLY         userText: PromptString
# CHAT_REPLY     ): Promise<ContextItem[]> {
# CHAT_REPLY         return wrapInActiveSpan('chat.context.search.remote', async () => {
# CHAT_REPLY             if (!remoteSearch) {
# CHAT_REPLY                 return []
# CHAT_REPLY             }
# CHAT_REPLY             return (await remoteSearch.query(userText)).map(result => {
# CHAT_REPLY                 return {
# CHAT_REPLY                     type: 'file',
# CHAT_REPLY                     content: result.content,
# CHAT_REPLY                     range: new vscode.Range(result.startLine, 0, result.endLine, 0),
# CHAT_REPLY                     uri: result.uri,
# CHAT_REPLY                     source: ContextItemSource.Unified,
# CHAT_REPLY                     repoName: result.repoName,
# CHAT_REPLY                     title: result.path,
# CHAT_REPLY                     revision: result.commit,
# CHAT_REPLY                 } satisfies ContextItem
# CHAT_REPLY             })
# CHAT_REPLY         })
# CHAT_REPLY     }
# CHAT_REPLY     ```
# CHAT_REPLY 
# CHAT_REPLY 2. **`RemoteSearch` class in `cody_test/vscode/src/context/remote-search.ts`**:
# CHAT_REPLY     - The `query` method is used to perform the remote search.
# CHAT_REPLY     ```typescript
# CHAT_REPLY     public async query(query: PromptString): Promise<ContextSearchResult[]> {
# CHAT_REPLY         const result = await graphqlClient.contextSearch(this.getRepoIdSet(), query.toString())
# CHAT_REPLY         if (result instanceof Error) {
# CHAT_REPLY             throw result
# CHAT_REPLY         }
# CHAT_REPLY         return result || []
# CHAT_REPLY     }
# CHAT_REPLY     ```
# CHAT_REPLY 
# CHAT_REPLY 3. **`search` method in `RemoteSearch` class in `cody_test/vscode/src/context/remote-search.ts`**:
# CHAT_REPLY     - This method is used to perform a search and return the results as `ContextItemFile[]`.
# CHAT_REPLY     ```typescript
# CHAT_REPLY     public async search(query: PromptString): Promise<ContextItemFile[]> {
# CHAT_REPLY         const results = await this.query(query)
# CHAT_REPLY         if (isError(results)) {
# CHAT_REPLY             throw results
# CHAT_REPLY         }
# CHAT_REPLY         return (results || []).map(
# CHAT_REPLY             result =>
# CHAT_REPLY                 ({
# CHAT_REPLY                     type: 'file',
# CHAT_REPLY                     uri: result.uri,
# CHAT_REPLY                     repoName: result.repoName,
# CHAT_REPLY                     revision: result.commit,
# CHAT_REPLY                     source: ContextItemSource.Unified,
# CHAT_REPLY                     content: result.content,
# CHAT_REPLY                     range: {
# CHAT_REPLY                         start: {
# CHAT_REPLY                             line: result.startLine,
# CHAT_REPLY                             character: 0,
# CHAT_REPLY                         },
# CHAT_REPLY                         end: {
# CHAT_REPLY                             line: result.endLine,
# CHAT_REPLY                             character: 0,
# CHAT_REPLY                         },
# CHAT_REPLY                     },
# CHAT_REPLY                 }) satisfies ContextItem
# CHAT_REPLY         )
# CHAT_REPLY     }
# CHAT_REPLY     ```
# CHAT_REPLY 
# CHAT_REPLY These are the main locations where remote searches are initiated and handled within the provided codebase context.

# CONTEXT_ITEMS [{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/chat/chat-view/context.tsL159-180"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/lib/shared/src/local-context/index.tsL21-24"},{"source":"search","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/context/remote-search.tsL0-163"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/webviews/search.htmlL0-20"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/webviews/Components/EnhancedContextSettings.tsxL60-87"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/webviews/Components/EnhancedContextSettings.tsxL353-377"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/webviews/Components/EnhancedContextSettings.story.tsxL211-235"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/chat/chat-view/SimpleChatPanelProvider.tsL1017-1043"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/chat/chat-view/context.tsL0-32"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/webviews/Components/FileLink.tsxL43-65"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/README.mdL44-60"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/context/repo-picker.tsL0-22"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/lib/shared/src/telemetry/index.tsL0-22"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/agent/protocol.mdL488-509"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/chat/chat-view/SimpleChatPanelProvider.tsL213-234"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/lib/shared/src/codebase-context/context-status.tsL28-62"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/webviews/SearchPanel.tsxL249-272"},{"source":"embeddings","file":"/Users/jan/repos/cody-leaderboard/input/chat-context/cody_test/vscode/src/jsonrpc/agent-protocol.tsL175-202"}]

 class: Find logic
